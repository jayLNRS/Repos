config:
  phases:
    - name: 300s_1rps
      duration: 300
      arrivalRate: 1
  variables:
    transaction_type: ["CREDIT", "DEBIT"]
    payment_type: ["TARGET", "SEPA", "MT103", "SEPA-INSTANT"]
  payload:
    - path: "../data/TradeStation.csv"
      fields:
        - clientReference
        - accountReference
        - effectiveDateTime
        - iban
        - paymentType
        - paymentSubtype

scenarios:
  - name: "Test Tradestation Account Creation in PP"
    flow:
      - post:
          url: "/TruAccountAPI/rest/Accounts/v1/RunStrategy"
          json:
            {
                "accountStrategyId": 1547, 
                "accountReference": "{{ accountReference }}", 
                "application": {
                },
                "person": [
                    {
                        "role": "APPLICANT",
                        "isPrimary": true,
                        "clientReference": "", 
                        "annualIncome": 100000,
                        "dateOfBirth": "",
                        "emailAddress": "",
                        "firstName": "Donal",
                        "middleNames": "",
                        "lastName": "Trump",
                        "gender": "",
                        "mobilePhoneNumber": "",
                        "residentialAddress": [
                            {
                                "addressLine1": "8601",
                                "addressLine2": "Burlington Court",
                                "addressLine3": "Romford London",
                                "zipPostcode": "AB24 1WX",
                                "country": "USA"
                            }
                        ]
                    }
                ],
                "financialAccount": {
                    "clientReference": "{{ clientReference }}", 
                    "accountNumber": "{{ accountReference }}",
                    "productName": "Equities",
                    "productCode": "Individual",
                    "financialTransaction": [
                        {
                            "clientReference": "{{ clientReference }}", 
                            "sortCode": "000000",
                            "accountNumber": "56879N6H69712345",
                            "accountHolder": "Donald Trump",
                            "effectiveDateTime": "{{ effectiveDateTime }} 00:00:00", 
                            "creditOrDebit": "{{ transaction_type }}", 
                            "currencyCode": "USD", 
                            "paymentType": "{{ paymentType }}", 
                            "paymentSubtype": "{{ paymentSubtype }}", 
                            "countryOfTransaction": "USA", 
                            "amount": "{{ $randAmount() }}",
                            "balance": "",
                            "paymentReference": "",
                            "thirdParty": "Donal Trump",
                            "thirdPartyId": "Bank of America", 
                            "IBAN": "BankofAmerica{{ iban }}"
                        }
                    ]
                }
            }

