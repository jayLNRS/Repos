config:
  phases:
    - name: 300s_1rps
      duration: 300
      arrivalRate: 1
  fake-data:
    randNumber:
      min: 10
      max: 99
  ensure:
    maxErrorRate: 0
    thresholds:
      - http.response_time.min: 1000
      - http.response_time.mean: 2000
      - http.response_time.p95: 2000
      - http.response_time.p99: 3000
      - http.response_time.max: 5000

scenarios:
  - name: "Test Baseline Strategy in PP"
    flow:
      - post:
          url: "/TruAccountAPI/rest/Accounts/v1/RunStrategy"
          json:
            {
              "accountStrategyId": 1589,
              "accountId": null,
              "person": [
                {
                  "role": "APPLICANT",
                  "isPrimary": true,
                  "clientReference": "{{ $randBic() }}",
                  "annualIncome": "{{ $randAmount() }}",
                  "dateOfBirth": "",
                  "emailAddress": "{{ $randEmail() }}",
                  "firstName": "{{ $randFirstName() }}",
                  "middleNames": "{{ $randFirstName() }}",
                  "lastName": "{{ $randFirstName() }}",
                  "gender": "",
                  "mobilePhoneNumber": "",
                  "residentialAddress": [
                    {
                      "addressLine1": "{{ $randStreetAddress() }}",
                      "addressLine2": "{{ $randStreetName() }}",
                      "addressLine3": "{{ $randCity() }}",
                      "zipPostcode": "{{ $randZipCode() }}",
                      "country": "GBR"
                    }
                  ],
                  "finance": {
                    "bankAccount": [
                      {
                        "sortCode": "{{ $randNumber() }}-{{ $randNumber() }}-{{ $randNumber() }}",
                        "accountNumber": "{{ $randAccount() }}"
                      }
                    ],
                    "tax": {
                      "International": {
                        "taxDomicileOtherCountry": "",
                        "taxDomiciles": {
                          "taxCountry": "",
                          "financeTaxNumber": "",
                          "primary": true
                        }
                      },
                      "DEU": {
                        "isGermanTaxResident": true
                      },
                      "USA": {
                        "usCitizen": true
                      }
                    },
                    "savings": 100
                  }
                },
                {
                  "role": "APPLICANT",
                  "clientReference": "{{ $randBic() }}",
                  "annualIncome": "{{ $randAmount() }}",
                  "dateOfBirth": "",
                  "emailAddress": "{{ $randEmail() }}",
                  "firstName": "{{ $randFirstName() }}",
                  "middleName": "{{ $randFirstName() }}",
                  "lastName": "{{ $randFirstName() }} s",
                  "gender": "",
                  "mobilePhoneNumber": "",
                  "residentialAddress": [
                    {
                      "addressLine1": "{{ $randStreetAddress() }}",
                      "addressLine2": "{{ $randStreetName() }}",
                      "addressLine3": "{{ $randCity() }}",
                      "zipPostcode": "{{ $randZipCode() }}",
                      "country": "GBR"
                    }
                  ],
                  "finance": {
                    "bankAccount": [
                      {
                        "sortCode": "{{ $randNumber() }}-{{ $randNumber() }}-{{ $randNumber() }}",
                        "accountNumber": "{{ $randAccount() }}"
                      }
                    ]
                  }
                }
              ],
              "company": [
                {
                  "clientReference": "{{ $randBic() }}",
                  "isPrimary": true,
                  "companyType": "LTD",
                  "businessName": "{{ $randCompanyName() }}",
                  "businessRegNumber": "01591116",
                  "emailAddress": "{{ $randEmail() }}",
                  "companyAddress": [
                    {
                      "addressLine1": "{{ $randStreetAddress() }}",
                      "addressLine2": "{{ $randCity() }}",
                      "zipPostcode": "{{ $randZipCode() }}",
                      "currentAddress": true
                    }
                  ],
                  "finance": {
                    "bankAccount": [
                      {
                        "name": "{{ $randCompanyName() }}",
                        "sortCode": "{{ $randNumber() }}-{{ $randNumber() }}-{{ $randNumber() }}",
                        "accountNumber": "{{ $randAccount() }}"
                      }
                    ]
                  }
                }
              ]
            }

